(this["webpackJsonpspeak-test"]=this["webpackJsonpspeak-test"]||[]).push([[0],{101:function(e,t,a){e.exports=a(115)},106:function(e,t,a){},107:function(e,t,a){},111:function(e,t,a){},114:function(e,t,a){},115:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),l=(a(106),a(107),a(86)),i=a(149),s=a(147);function u(e){var t=e.children,a=Object(s.a)("(prefers-color-scheme: dark)"),n=r.a.useMemo((function(){return Object(l.a)({palette:{type:a?"dark":"light"}})}),[a]);return r.a.createElement(i.a,{theme:n},t)}var m=a(31),d=a(34),p=a(35),g=a(55),f=a(50),h=a(56),v={state:null,audioUrl:null,recognition:null,setRecordingState:function(){},record:function(){console.log("Not implemented!")}},E=r.a.createContext(v),b=function(e){function t(e){var a,n;Object(d.a)(this,t),a=Object(g.a)(this,Object(f.a)(t).call(this,e));var r=function(e){a.setState(Object(m.a)({},a.state,{state:e}))},o=function(e){a.setState((function(t){return Object(m.a)({},a.state,{recognition:e})}))};return a.state=Object(m.a)({},v,{state:"stopped",record:function(e){var t=e.targetLanguageCode;if(r("listening"),"stopped"!==a.state.state){var c=a.state.recognition;return c&&c.abort(),r("stopped"),o(null),void(n&&n.stop())}if(navigator.mediaDevices){var l=[];navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){(n=new MediaRecorder(e)).start(),n.onstart=function(e){},n.onstop=function(t){r("stopped");var n=new Blob(l,{type:"audio/ogg; codecs=opus"});l=[];var o,c=URL.createObjectURL(n),i=new Audio;i.src=c,i.play(),o=c,a.setState(Object(m.a)({},a.state,{audioUrl:o})),e.getTracks().forEach((function(e){e.stop()}))},n.ondataavailable=function(e){l.push(e.data)}}))}var i=new window.webkitSpeechRecognition;i.continuous=!1,i.interimResults=!1,i.lang=t,i.addEventListener("audiostart",(function(){r("listening")})),i.addEventListener("soundstart",(function(e){r("recording")})),i.addEventListener("soundend",(function(e){i.stop(),n&&n.stop(),o(null)})),document.addEventListener("visibilitychange",(function(){document.hidden&&(i.abort(),n&&"recording"===n.state&&n.stop())})),i.start(),r("listening"),o(i)}}),a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement(E.Provider,{value:this.state},this.props.children)}}]),t}(r.a.Component),C=E,k=a(43),y={name:k.name,setWorkbookData:function(){console.log("Not implemented!")},phrases:k.phrases},L=r.a.createContext(y),x=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(g.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state=y,a}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state;t.setWorkbookData=function(t){var a=t.name,n=t.phrases;e.setState(Object(m.a)({},e.state,{name:a,phrases:n}))},this.setState(t)}},{key:"render",value:function(){var e=this.state;return r.a.createElement(L.Provider,{value:e},this.props.children)}}]),t}(r.a.Component),w=L,j=a(172),O=a(12),S=a(150),U=a(120),M=a(117),R=a(87),N=a(41),I=Object(S.a)((function(e){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));function P(){var e=I(),t=r.a.useState(!1),a=Object(O.a)(t,2),n=a[0],o=a[1];r.a.useEffect((function(){return navigator&&navigator.mediaDevices?(navigator.mediaDevices.getUserMedia({audio:!0}).then((function(e){o(!1),e.getTracks().forEach((function(e){e.stop()}))})).catch((function(){o(!0)})),function(){}):(console.warn("Could not detect media devices. This may be because the application was not loaded over a secure context (e.g. https). https://developer.mozilla.org/en-US/docs/Web/API/MediaDevices/getUserMedia#Security"),void o(!0))}),[]);return r.a.createElement("div",null,r.a.createElement(U.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:e.modal,open:n,onClose:function(){o(!1)},closeAfterTransition:!0,BackdropComponent:M.a,BackdropProps:{timeout:500}},r.a.createElement(R.a,{in:n},r.a.createElement("div",{className:e.paper},r.a.createElement(N.a,{variant:"h5"},"This application requires access to your microphone."),r.a.createElement(N.a,{variant:"body1"})))))}var B=a(162),z=a(163),W=a(78),T=a.n(W),D=(a(111),a(152)),F=a(79),J=a.n(F),A=function(){return r.a.createElement(D.a,{href:"https://github.com/alexjpaz/polly",target:"_blank"},r.a.createElement(J.a,null))},G=a(83),V=a.n(G),q=a(156),H=a(158),K=a(159),Q=a(157),$=a(160),_=a(153),X=a(155),Y=a(154),Z=a(80),ee=a.n(Z);function te(e){var t=e.onSourceChange;return r.a.createElement(_.a,{button:!0,onClick:function(e){e.stopPropagation(),t(k)}},r.a.createElement(Y.a,null,r.a.createElement(ee.a,null)),r.a.createElement(X.a,{primary:"Sample",secondary:"Load the default sample workbook (13 sentences in Spanish)"}))}var ae=a(22),ne=a.n(ae),re=a(81),oe=a.n(re),ce=function(){function e(){Object(d.a)(this,e)}return Object(p.a)(e,null,[{key:"validateWorkbook",value:function(e){if(!e.phrases)throw new Error("Workbook does not have any valid phrases")}},{key:"loadFromFile",value:function(t){return ne.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",new Promise((function(a,n){var r=new FileReader;r.onload=function(t){try{var r=t.target.result,o=JSON.parse(r);return e.validateWorkbook(o),a(o)}catch(t){return n(t)}},r.onerror=n,r.readAsText(t)})));case 1:case"end":return a.stop()}}))}}]),e}();function le(e){var t=e.onSourceChange,a=r.a.useRef(null);return r.a.createElement(_.a,{button:!0,onClick:function(){a.current.click()}},r.a.createElement(Y.a,null,r.a.createElement(oe.a,null)),r.a.createElement(X.a,{primary:"File",secondary:"Load a workbook from your local system"}),r.a.createElement("input",{hidden:!0,ref:a,"data-testid":"file",name:"file",type:"file","data-file-loaded":!1,accept:"application/json",onChange:function(e){var a,n;return ne.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a=e.target.files[0],r.prev=1,r.next=4,ne.a.awrap(ce.loadFromFile(a));case 4:n=r.sent,t(n),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),window.alert("Invalid workbook:"+r.t0.message);case 11:case"end":return r.stop()}}),null,null,[[1,8]])}}))}var ie=a(118),se=a(161),ue=a(82),me=a.n(ue),de=a(171);function pe(e){var t;return ne.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=null,a.next=3,ne.a.awrap(fetch(e).then((function(e){return e.json()})));case 3:return t=a.sent,a.abrupt("return",t);case 5:case"end":return a.stop()}}))}function ge(e){var t=e.open,a=e.onClose,n=e.onLoad,o=r.a.useState(null),c=Object(O.a)(o,2),l=c[0],i=c[1];return r.a.createElement(q.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement(Q.a,{id:"form-dialog-title"},"Enter URL"),r.a.createElement(H.a,null,r.a.createElement(K.a,null,"Enter a URL to load a workbook from."),r.a.createElement(de.a,{autoFocus:!0,margin:"dense",id:"url",label:"URL",inputProps:{"data-testid":"url"},type:"url",onChange:function(e){return i(e.target.value)},onKeyUp:function(e){return i(e.target.value)},fullWidth:!0})),r.a.createElement(se.a,null,r.a.createElement(ie.a,{onClick:a,color:"primary"},"Cancel"),r.a.createElement(ie.a,{onClick:function(e){var t;return ne.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e.stopPropagation(),a.prev=1,a.next=4,ne.a.awrap(pe(l));case 4:t=a.sent,n(t),a.next=12;break;case 8:throw a.prev=8,a.t0=a.catch(1),window.alert("Failed to load data from URL:"+a.t0.message),a.t0;case 12:case"end":return a.stop()}}),null,null,[[1,8]])},color:"primary"},"Submit")))}function fe(e){var t=e.onSourceChange,a=r.a.useState(!1),n=Object(O.a)(a,2),o=n[0],c=n[1];return r.a.createElement(_.a,{button:!0,onClick:function(e){e.stopPropagation(),c(!0)}},r.a.createElement(Y.a,null,r.a.createElement(me.a,null)),r.a.createElement(X.a,{primary:"URL",secondary:"Load a workbook from a URL"}),r.a.createElement(ge,{open:o,onLoad:function(e){c(!1),t(e)},onClose:function(e){e.stopPropagation(),c(!1)}}))}function he(e){var t=e.onSourceChange;return r.a.createElement($.a,null,r.a.createElement(te,{onSourceChange:t}),r.a.createElement(fe,{onSourceChange:t}),r.a.createElement(le,{onSourceChange:t}))}function ve(e){var t=e.isOpen,a=void 0!==t&&t,n=e.onClose,o=r.a.useContext(L);return r.a.createElement(r.a.Fragment,null,r.a.createElement(q.a,{open:a,onClose:function(e){e.stopPropagation(),n()},"aria-labelledby":"form-dialog-title"},r.a.createElement(Q.a,{id:"load-workbook-dialog"},"Load Workbook"),r.a.createElement(H.a,null,r.a.createElement(K.a,null,"Please specify a source for your workbook."),r.a.createElement(he,{onSourceChange:function(e){o.setWorkbookData(e),n()}}))))}function Ee(e){var t=e.isOpen,a=void 0!==t&&t,n=e.onClose,o=e.children;return r.a.createElement(ve,{isOpen:a,onClose:n},o)}var be=function(){var e=r.a.useState(!1),t=Object(O.a)(e,2),a=t[0],n=t[1];return r.a.createElement(D.a,{onClick:function(e){e.stopPropagation(),n(!0)},"data-testid":"import-contacts-button"},r.a.createElement(V.a,null),r.a.createElement(Ee,{isOpen:a,onClose:function(){n(!1)}}))},Ce=Object(S.a)((function(e){return{root:{flexGrow:1},appBar:{backgroundColor:"#333333"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}}));function ke(){var e=Ce();return r.a.createElement("div",{className:e.root},r.a.createElement(B.a,{position:"static",className:e.appBar},r.a.createElement(z.a,null,r.a.createElement(j.a,{mr:1},r.a.createElement("img",{alt:"brand logo",style:{width:"1.25rem"},src:T.a})),r.a.createElement(N.a,{variant:"h6",className:e.title},"Polly"),r.a.createElement(be,null),r.a.createElement(A,null))))}a(114);var ye=a(170),Le=Object(S.a)({center:{"text-align":"center"}});function xe(e){var t=Le();return r.a.createElement(j.a,{className:t.center},e.children)}var we=Object(S.a)({forceBottom:{width:"100%",position:"fixed",bottom:0,"margin-bottom":"10px"}});function je(e){var t=we();return r.a.createElement(j.a,{className:t.forceBottom},e.children)}var Oe=a(164),Se=a(166),Ue=a(165),Me=a(53),Re=a.n(Me);var Ne=function(e){var t=e.defaultText,a=e.utterance,n=r.a.useState(t),o=Object(O.a)(n,2),c=o[0],l=o[1];return r.a.useEffect((function(){return a?(a.addEventListener("boundary",(function(e){var t=e.charIndex,n=e.charLength,o=a.text.substring(0,t),c=a.text.substring(t,t+n),i=a.text.substring(t+n);l(r.a.createElement("span",null,r.a.createElement("span",null,o),r.a.createElement("span",{style:{color:"red"}},c),r.a.createElement("span",null,i)))})),a.addEventListener("end",(function(){l(t)}))):l(t),function(){a&&(a.onboundary=function(){})}}),[a,t]),r.a.createElement(r.a.Fragment,null,c)},Ie=a(84),Pe=a.n(Ie);function Be(e){return r.a.createElement(ie.a,e,r.a.createElement(Pe.a,null),e.children)}var ze=Object(S.a)({card:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function We(e){var t=r.a.useState(null),a=Object(O.a)(t,2),n=a[0],o=a[1],c=ze(),l=function(t){return function(a){a.preventDefault(),a.stopPropagation();var n=function(e,t){var a=e.targetLanguageCode,n=e.target,r=new SpeechSynthesisUtterance(n),o=speechSynthesis.getVoices().find((function(e){return e.lang===a}));return r.voice=o,r.voiceURI="native",r.volume=1,r.rate=.75,r.pitch=1,r.text=n,r.lang=e.targetLanguageCode,Object.assign(r,t),speechSynthesis.speak(r),r}(e.phrase,t);n.addEventListener("end",(function(){o(null)})),o(n)}},i=l({rate:.5});return r.a.createElement(Oe.a,{className:c.card},r.a.createElement(Ue.a,null,r.a.createElement(N.a,{className:c.title,color:"textSecondary",gutterBottom:!0},e.phrase.source),r.a.createElement(N.a,{variant:"h4",component:"h2"},r.a.createElement(Ne,{defaultText:e.phrase.target,utterance:n}))),r.a.createElement(Se.a,null,r.a.createElement(ie.a,{size:"small",onClick:l()},r.a.createElement(Re.a,null)),r.a.createElement(Be,{onClick:i,size:"small"})))}var Te=a(54),De=a.n(Te),Fe=a(40),Je=a.n(Fe);function Ae(e){var t=r.a.createElement(De.a,null),a="Recite",n="text";return"listening"===e.state&&(t=r.a.createElement(Je.a,null),a="Listening",n="outlined"),"recording"===e.state&&(t=r.a.createElement(Je.a,null),a="Recording",n="contained"),r.a.createElement(ie.a,Object.assign({startIcon:t,variant:n,color:"secondary"},e),a)}var Ge=Object(S.a)({card:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}});function Ve(e){e.defaultText;var t=e.recognition,a=r.a.useState("..."),n=Object(O.a)(a,2),o=n[0],c=n[1];return r.a.useEffect((function(){return t?(t.addEventListener("audiostart",(function(e){c("...")})),t.addEventListener("nomatch",(function(e){c("< No Match >")})),t.addEventListener("result",(function(e){if(e.results){var t=e.results[0][0].transcript;c(t)}})),function(){t.onresult=function(){}}):function(){}})),o}function qe(e){var t=Ge(),a=r.a.useContext(C),n=a.audioUrl,o=a.recognition,c=a.state,l=function(e){return function(e){e.preventDefault(),e.stopPropagation();var t=new Audio;t.src=n,t.play()}(e)};return r.a.createElement(Oe.a,{variant:"outlined",className:t.card},r.a.createElement(Ue.a,null,r.a.createElement(N.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Recite the phrase"),r.a.createElement(N.a,{variant:"h4",component:"h2",onClick:l},r.a.createElement(Ve,{defaultText:e.phrase.target,recognition:o}))),r.a.createElement(Se.a,null,r.a.createElement(Ae,{onClick:function(){return a.record(e.phrase)},state:c}),r.a.createElement(ie.a,{size:"small",disabled:!n,onClick:l},r.a.createElement(Re.a,null))))}var He=a(167);function Ke(e){var t=r.a.useContext(C),a=r.a.createElement(De.a,null),n="Recite";"listening"===t.state&&(a=r.a.createElement(Je.a,null),n="Listening"),"recording"===t.state&&(a=r.a.createElement(Je.a,null),n="Recording");return r.a.createElement(He.a,Object.assign({variant:"extended"},e,{color:"secondary",onClick:function(){return t.record(e.phrase)}}),a,n)}var Qe=a(169),$e=a(85),_e=a.n($e),Xe=a(168);function Ye(e){var t=e.phrase;return r.a.createElement(_.a,{button:!0},r.a.createElement(X.a,{primary:t.target,secondary:t.source}))}function Ze(e){var t=e.phrases,a=void 0===t?[]:t,n=e.onSelectItem,o=a.map((function(e,t){return r.a.createElement("div",{key:t,onClick:function(a){return function(e,t){n(e,t)}(e,t)}},r.a.createElement(Ye,{phrase:e}))}));return r.a.createElement($.a,{component:"nav"},o)}var et=Object(S.a)((function(e){return{appBar:{backgroundColor:"#333333",position:"relative"},title:{marginLeft:e.spacing(2),flex:1}}})),tt=r.a.forwardRef((function(e,t){return r.a.createElement(Xe.a,Object.assign({direction:"up",ref:t},e))}));function at(e){var t=e.open,a=e.phrases,n=e.onCancel,o=e.onSelectItem,c=et();return r.a.createElement(q.a,{fullScreen:!0,open:t,onClose:n,TransitionComponent:tt},r.a.createElement(B.a,{className:c.appBar},r.a.createElement(z.a,null,r.a.createElement(D.a,{edge:"start",color:"inherit",onClick:n,"aria-label":"close"},r.a.createElement(_e.a,null)),r.a.createElement(N.a,{variant:"h6",className:c.title},"Select Phrase"))),r.a.createElement(H.a,null,r.a.createElement(Ze,{phrases:a,onSelectItem:o})))}var nt=function(e){var t=e.phrases,a=e.setCurrentPhrase,n=r.a.useState(0),o=Object(O.a)(n,2),c=o[0],l=o[1],i=r.a.useState(!1),s=Object(O.a)(i,2),u=s[0],m=s[1],d=function(e){return function(){(c+=e)>=t.length&&(c=0),c<0&&(c=t.length-1),a(t[c]),l(c)}},p=d(-1),g=d(1);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qe.a,{"aria-label":"outlined navigation button group"},r.a.createElement(ie.a,{onClick:p},"Back"),r.a.createElement(ie.a,{onClick:function(){m(!0)}},c+1," / ",t.length),r.a.createElement(ie.a,{onClick:g},"Next")),r.a.createElement(at,{open:u,onCancel:function(){return m(!1)},phrases:t,onSelectItem:function(e,t){a(e),l(t),m(!1)}}))};var rt=function(){var e=Object(n.useContext)(w),t=Object(n.useState)(e.phrases[0]),a=Object(O.a)(t,2),o=a[0],c=a[1];return r.a.createElement(j.a,{mt:1},r.a.createElement(ye.a,{maxWidth:"md"},r.a.createElement(j.a,{mb:2},r.a.createElement(We,{phrase:o})),r.a.createElement(j.a,{mb:2},r.a.createElement(qe,{phrase:o}))),r.a.createElement(je,null,r.a.createElement(xe,null,r.a.createElement(j.a,{mb:2},r.a.createElement(Ke,{phrase:o})),r.a.createElement(nt,{phrases:e.phrases,setCurrentPhrase:c}))))};function ot(){return r.a.createElement(j.a,{height:"100%"},r.a.createElement(ke,null),r.a.createElement(rt,null),r.a.createElement(P,null))}var ct=function(){return r.a.createElement(u,null,r.a.createElement(x,null,r.a.createElement(b,null,r.a.createElement(ot,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ct,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},43:function(e){e.exports=JSON.parse('{"name":"13 Sententces","phrases":[{"sourceLanguageCode":"en-Us","source":"The apple is red","targetLanguageCode":"es-Mx","target":"La manzana es roja"},{"sourceLanguageCode":"en-Us","source":"It is John\'s apple","targetLanguageCode":"es-Mx","target":"Es la manzana de John"},{"sourceLanguageCode":"en-Us","source":"I give John the apple","targetLanguageCode":"es-Mx","target":"Le doy la manzana a John"},{"sourceLanguageCode":"en-Us","source":"We give him the apple","targetLanguageCode":"es-Mx","target":"Le damos la manzana"},{"sourceLanguageCode":"en-Us","source":"He gives it to John","targetLanguageCode":"es-Mx","target":"\xc9l se la da a John"},{"sourceLanguageCode":"en-Us","source":"She gives it to him","targetLanguageCode":"es-Mx","target":"Ella se la da"},{"sourceLanguageCode":"en-Us","source":"I must give it to him","targetLanguageCode":"es-Mx","target":"Debo d\xe1rsela a \xe9l"},{"sourceLanguageCode":"en-Us","source":"I want to give it to her","targetLanguageCode":"es-Mx","target":"Quiero d\xe1rsela (a ella)"},{"sourceLanguageCode":"en-Us","source":"I\u2019m going to buy it tomorrow","targetLanguageCode":"es-Mx","target":"Voy a comprarla ma\xf1ana"},{"sourceLanguageCode":"en-Us","source":"I can\u2019t eat the apple","targetLanguageCode":"es-Mx","target":"No puedo comer la manzana"},{"sourceLanguageCode":"en-Us","source":"I can\u2019t eat the apple","targetLanguageCode":"es-Mx","target":"No puedo comer la manzana"},{"sourceLanguageCode":"en-Us","source":"I have eaten the apple","targetLanguageCode":"es-Mx","target":"Me he comido la manzana"},{"sourceLanguageCode":"en-Us","source":"Is the apple red?","targetLanguageCode":"es-Mx","target":"\xbfLa manzana es roja?"},{"sourceLanguageCode":"en-Us","source":"The apples are red","targetLanguageCode":"es-Mx","target":"Las manzanas son rojas"}]}')},78:function(e,t,a){e.exports=a.p+"static/media/logo192.2fd840b8.png"}},[[101,1,2]]]);
//# sourceMappingURL=main.c6e36213.chunk.js.map